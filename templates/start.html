<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Welcome to AIChatFlows Setup</title>
  <link rel="stylesheet" href="/static/css/styles.css">
  <meta name="description" content="Start your AI-powered chatbot setup with AIChatFlows">
  <meta name="robots" content="noindex">
  <style>
    /* Form-specific styles */
    .setup-container {
      min-height: 100vh;
      background: var(--clr-dark);
      padding-top: 3em;
      padding-bottom: 3em;
    }
    
    .setup-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 2em;
    }
    
    .setup-header {
      text-align: center;
      margin-bottom: 3em;
    }
    
    .setup-header h1 {
      font-family: var(--ff-heading);
      font-size: 3.5rem;
      color: var(--clr-primary);
      margin-bottom: 0.5em;
      line-height: 1.2;
    }
    
    .welcome-text {
      font-family: var(--ff-sans);
      font-size: 1.2rem;
      color: var(--clr-light);
      margin-bottom: 3em;
      line-height: 1.6;
      opacity: 0.9;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    
    .form-container {
      background: var(--clr-secondary);
      padding: 3em;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .form-section {
      margin-bottom: 3em;
      padding-bottom: 2em;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .form-section:last-of-type {
      border-bottom: none;
      margin-bottom: 2em;
    }
    
    .section-title {
      font-family: var(--ff-heading);
      font-size: 1.75rem;
      color: var(--clr-primary);
      margin-bottom: 1.5em;
      display: flex;
      align-items: center;
      gap: 0.5em;
    }
    
    .form-group {
      margin-bottom: 1.5em;
    }
    
    .form-group label {
      display: block;
      color: var(--clr-light);
      font-weight: 600;
      margin-bottom: 0.5em;
      font-size: 1rem;
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.75em 1em;
      background: var(--clr-dark);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: var(--clr-light);
      font-size: 1rem;
      font-family: var(--ff-sans);
      transition: border-color 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--clr-primary);
    }
    
    .conditional-section {
      margin-top: 1em;
      padding-left: 1.5em;
      border-left: 3px solid var(--clr-primary);
      display: none;
    }
    
    .conditional-section.show {
      display: block;
      animation: fadeIn 0.3s ease-in-out;
    }
    
    .conditional-message {
      margin-top: 1.5em;
    }
    
    .info-message {
      padding: 1.2em;
      background: linear-gradient(135deg, rgba(0, 230, 118, 0.1), rgba(0, 123, 255, 0.1));
      border: 1px solid rgba(0, 230, 118, 0.3);
      border-radius: 8px;
      color: var(--clr-light);
      font-size: 0.95rem;
      line-height: 1.6;
    }
    
    .info-message strong {
      color: var(--clr-primary);
    }
    
    .submit-button {
      width: 100%;
      padding: 1.25em 2em;
      background: linear-gradient(45deg, var(--clr-primary), var(--clr-accent-blue));
      color: #fff;
      border: none;
      border-radius: 50px;
      font-size: 1.2rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 230, 118, 0.3);
      margin-top: 2em;
    }
    
    .submit-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 230, 118, 0.4);
    }
    
    .submit-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .error-message,
    .success-message {
      padding: 1.5em;
      border-radius: 8px;
      margin-bottom: 1em;
      font-size: 1rem;
      text-align: center;
      display: none;
    }
    
    .error-message {
      background: rgba(255, 107, 107, 0.1);
      border: 1px solid rgba(255, 107, 107, 0.3);
      color: #ff6b6b;
    }
    
    .success-message {
      background: rgba(0, 230, 118, 0.1);
      border: 1px solid rgba(0, 230, 118, 0.3);
      color: var(--clr-primary);
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 2em;
    }
    
    .loading-spinner::after {
      content: "";
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 3px solid rgba(0, 230, 118, 0.3);
      border-top-color: var(--clr-primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .privacy-text {
      font-size: 0.85rem;
      color: var(--clr-light);
      opacity: 0.7;
      text-align: center;
      margin-top: 1em;
    }
    
    .privacy-text a {
      color: var(--clr-primary);
      text-decoration: none;
    }
    
    .privacy-text a:hover {
      text-decoration: underline;
    }
    
    /* Security: Disable text selection on form elements */
    .form-container input[type="password"] {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
</head>
<body>
  <div class="setup-container">
    <div class="setup-content">
      <div class="setup-header">
        <h1>üöÄ AIChatFlows Setup</h1>
        <p class="welcome-text">
          Welcome! Let's get your AI-powered chatbot automation system set up. 
          This secure form will collect your business information and preferences.
        </p>
      </div>
      
      <div class="form-container">
        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>
        <div class="loading-spinner" id="loadingSpinner"></div>
        
        <form id="onboardingForm" method="post" action="/api/submit-onboarding">
          <!-- Business Information -->
          <div class="form-section">
            <h2 class="section-title">üìã Business Information</h2>
            
            <div class="form-group">
              <label for="business_name">Business Name *</label>
              <input type="text" id="business_name" name="business_name" required maxlength="100">
            </div>
            
            <div class="form-group">
              <label for="instagram_handle">Instagram Handle (without @) *</label>
              <input type="text" id="instagram_handle" name="instagram_handle" required maxlength="30">
            </div>
            
            <div class="form-group">
              <label for="business_type">Business Type *</label>
              <select id="business_type" name="business_type" required>
                <option value="">Select your business type</option>
                <option value="Restaurant">Restaurant</option>
                <option value="Retail">Retail</option>
                <option value="Service">Service</option>
                <option value="E-commerce">E-commerce</option>
                <option value="Other">Other</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="common_customer_question">Most Common Customer Question *</label>
              <textarea id="common_customer_question" name="common_customer_question" required maxlength="500" rows="3"></textarea>
            </div>
            
            <div class="form-group">
              <label for="product_service_description">Product/Service Description *</label>
              <textarea id="product_service_description" name="product_service_description" required maxlength="1000" rows="4"></textarea>
            </div>
          </div>
          
          <!-- Plan Selection -->
          <div class="form-section">
            <h2 class="section-title">üí∞ Plan Selection</h2>
            
            <div class="form-group">
              <label>Choose Your Plan *</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="plan" value="Starter" required>
                  üíº Starter Plan - $50 setup + $100/month
                </label>
                <label>
                  <input type="radio" name="plan" value="Pro" required>
                  üöÄ Pro Plan - $50 setup + $150/month
                </label>
              </div>
            </div>
          </div>
          
          <!-- Login Information -->
          <div class="form-section">
            <h2 class="section-title">üîê Login Information</h2>
            
            <div class="form-group">
              <label>How would you like to share your login credentials? *</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="submission_method" value="Submit through this page" required>
                  Submit here (secure form)
                </label>
                <label>
                  <input type="radio" name="submission_method" value="Use sendsecure.ly" required>
                  Use SendSecure.ly (external secure service)
                </label>
                <label>
                  <input type="radio" name="submission_method" value="Request In-Person Setup" required>
                  Request setup call
                </label>
              </div>
            </div>
            
            <!-- SendSecure.ly Message -->
            <div id="sendSecurelyMessage" class="conditional-message" style="display: none;">
              <div class="info-message">
                <strong>üìß SendSecure.ly Selected:</strong> You've chosen to use SendSecure.ly to share your login information. After submitting this form, we'll email you a private link where you can securely enter your credentials. Please keep an eye on your inbox!
              </div>
            </div>
            
            <!-- Login fields (conditional) -->
            <div id="loginSection" class="conditional-section">
              <div class="form-group">
                <label for="instagram_email">Instagram Email *</label>
                <input type="email" id="instagram_email" name="instagram_email" autocomplete="off">
              </div>
              
              <div class="form-group">
                <label for="instagram_password">Instagram Password *</label>
                <input type="password" id="instagram_password" name="instagram_password" autocomplete="off">
              </div>
            </div>
          </div>
          
          <!-- Contact Information -->
          <div class="form-section">
            <h2 class="section-title">üìß Contact Information</h2>
            
            <div class="form-group">
              <label for="contact_email">Contact Email *</label>
              <input type="email" id="contact_email" name="contact_email" required maxlength="254">
            </div>
          </div>
          
          <!-- Confirmation -->
          <div class="form-section">
            <h2 class="section-title">‚úÖ Confirmation</h2>
            
            <div class="form-group">
              <label>
                <input type="checkbox" id="consent_to_share" name="consent_to_share" required>
                I agree to the <a href="/legal#privacy" target="_blank">Privacy Policy</a> and <a href="/legal#terms" target="_blank">Terms of Service</a> *
              </label>
            </div>
            
            <div class="form-group">
              <label>
                <input type="checkbox" id="confirm_accurate" name="confirm_accurate" required>
                I confirm that the information provided is accurate *
              </label>
            </div>
          </div>
          
          <button type="submit" class="submit-button" id="submitButton">
            üöÄ Start My Setup
          </button>
          
          <p class="privacy-text">
            üîí Your information is encrypted and secure. We take your privacy seriously.<br>
            <a href="/legal#privacy">Privacy Policy</a> | <a href="/legal#terms">Terms of Service</a>
          </p>
        </form>
      </div>
    </div>
  </div>
  
  <!-- Security-hardened JavaScript -->
  <script src="/static/js/secure-form.js"></script>
  
  <!-- Security measures -->
  <script>
    // Disable right-click and dev tools
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && e.keyCode === 73) || (e.ctrlKey && e.keyCode === 85)) {
        e.preventDefault();
      }
    });
    
    // Clear console periodically
    setInterval(() => {
      if (typeof console !== 'undefined' && console.clear) {
        console.clear();
      }
    }, 10000);
    
    // Prevent drag and drop
    document.addEventListener('dragover', e => e.preventDefault());
    document.addEventListener('drop', e => e.preventDefault());
  </script>
</body>
</html>